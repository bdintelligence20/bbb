(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1663a7ad"],{"00eb":function(e,t,r){},"04d1":function(e,t,r){"use strict";var n=r("342f"),a=n.match(/firefox\/(\d+)/i);e.exports=!!a&&+a[1]},"15fd":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("a4d3"),r("b64b");function n(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function a(e,t){if(null==e)return{};var r,a,i=n(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},"4e82":function(e,t,r){"use strict";var n=r("23e7"),a=r("e330"),i=r("59ed"),s=r("7b0b"),l=r("07fa"),o=r("083a"),u=r("577e"),c=r("d039"),m=r("addb"),d=r("a640"),f=r("04d1"),p=r("d998"),h=r("2d00"),g=r("512ce"),b=[],y=a(b.sort),v=a(b.push),w=c((function(){b.sort(void 0)})),k=c((function(){b.sort(null)})),x=d("sort"),O=!c((function(){if(h)return h<70;if(!(f&&f>3)){if(p)return!0;if(g)return g<603;var e,t,r,n,a="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)b.push({k:t+n,v:r})}for(b.sort((function(e,t){return t.v-e.v})),n=0;n<b.length;n++)t=b[n].k.charAt(0),a.charAt(a.length-1)!==t&&(a+=t);return"DGBEFHACIJK"!==a}})),P=w||!k||!x||!O,S=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:u(t)>u(r)?1:-1}};n({target:"Array",proto:!0,forced:P},{sort:function(e){void 0!==e&&i(e);var t=s(this);if(O)return void 0===e?y(t):y(t,e);var r,n,a=[],u=l(t);for(n=0;n<u;n++)n in t&&v(a,t[n]);m(a,S(e)),r=l(a),n=0;while(n<r)t[n]=a[n++];while(n<u)o(t,n++);return t}})},"512ce":function(e,t,r){"use strict";var n=r("342f"),a=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!a&&+a[1]},"7eed":function(e,t,r){"use strict";r("00eb")},"9a2a":function(e,t,r){"use strict";r.d(t,"d",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return s})),r.d(t,"e",(function(){return l})),r.d(t,"b",(function(){return o}));var n=r("b775");function a(e){return Object(n["a"])({url:"/system/news/list",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/system/news/"+e,method:"get"})}function s(e){return Object(n["a"])({url:"/system/news",method:"post",data:e})}function l(e){return Object(n["a"])({url:"/system/news",method:"put",data:e})}function o(e){return Object(n["a"])({url:"/system/news/"+e,method:"delete"})}},d998:function(e,t,r){"use strict";var n=r("342f");e.exports=/MSIE|Trident/.test(n)},e2fb:function(e,t,r){"use strict";r.d(t,"d",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"a",(function(){return l})),r.d(t,"f",(function(){return o})),r.d(t,"b",(function(){return u}));var n=r("b775");function a(e){return Object(n["a"])({url:"/system/category/list",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/system/category/"+e,method:"get"})}function s(e){return Object(n["a"])({url:"/system/category/tree/",method:"get",params:e})}function l(e){return Object(n["a"])({url:"/system/category",method:"post",data:e})}function o(e){return Object(n["a"])({url:"/system/category",method:"put",data:e})}function u(e){return Object(n["a"])({url:"/system/category/"+e,method:"delete"})}},e8ec:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{directives:[{name:"show",rawName:"v-show",value:e.showSearch,expression:"showSearch"}],ref:"queryForm",attrs:{model:e.queryParams,inline:!0,"label-width":"68px"}},[r("el-form-item",{attrs:{label:"文章标题",prop:"title"}},[r("el-input",{attrs:{placeholder:"请输入文章标题",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.title,callback:function(t){e.$set(e.queryParams,"title",t)},expression:"queryParams.title"}})],1),r("el-form-item",{attrs:{label:"文章简介",prop:"summary"}},[r("el-input",{attrs:{placeholder:"请输入文章简介",clearable:"",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.summary,callback:function(t){e.$set(e.queryParams,"summary",t)},expression:"queryParams.summary"}})],1),r("el-form-item",{attrs:{label:"状态",prop:"isPublish"}},[r("el-select",{attrs:{placeholder:"请选择状态",clearable:"",size:"small"},on:{change:e.handleQuery},model:{value:e.queryParams.status,callback:function(t){e.$set(e.queryParams,"status",t)},expression:"queryParams.status"}},e._l(e.dict.type.article_publish_status,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")]),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:e.resetQuery}},[e._v("重置")])],1)],1),r("el-row",{staticClass:"mb8",attrs:{gutter:10}},[r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:news:add"],expression:"['system:news:add']"}],attrs:{type:"primary",plain:"",icon:"el-icon-plus",size:"mini"},on:{click:e.handleAdd}},[e._v("新增")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:news:edit"],expression:"['system:news:edit']"}],attrs:{type:"success",plain:"",icon:"el-icon-edit",size:"mini",disabled:e.single},on:{click:e.handleUpdate}},[e._v("修改")])],1),r("el-col",{attrs:{span:1.5}},[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:news:remove"],expression:"['system:news:remove']"}],attrs:{type:"danger",plain:"",icon:"el-icon-delete",size:"mini",disabled:e.multiple},on:{click:e.handleDelete}},[e._v("删除")])],1),r("right-toolbar",{attrs:{showSearch:e.showSearch},on:{"update:showSearch":function(t){e.showSearch=t},"update:show-search":function(t){e.showSearch=t},queryTable:e.getList}})],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tables",attrs:{data:e.articleList,"default-sort":e.defaultSort},on:{"sort-change":e.handleSortChange,"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),r("el-table-column",{attrs:{label:"主键",align:"center",prop:"id",width:"100"}}),r("el-table-column",{attrs:{label:"标题",align:"center",prop:"title"}}),r("el-table-column",{attrs:{label:"新闻分类",align:"center",prop:"categoryId"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.categoryId?r("el-tag",[e._v(" "+e._s(e.categoryFormat(t.row.categoryId))+" ")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"排序",align:"center",prop:"sort",width:"100"}}),r("el-table-column",{attrs:{label:"发布状态",align:"center",prop:"isPublish"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("dict-tag",{attrs:{options:e.dict.type.article_publish_status,value:t.row.status}})]}}])}),r("el-table-column",{attrs:{label:"更新时间",align:"center",prop:"createTime",sortable:"custom","sort-orders":["descending","ascending"],width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(e.parseTime(t.row.createTime,"{y}-{m}-{d}")))])]}}])}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"200","class-name":"small-padding fixed-width"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:news:edit"],expression:"['system:news:edit']"}],attrs:{size:"mini",type:"text",icon:"el-icon-edit"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("修改")]),r("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["system:news:remove"],expression:"['system:news:remove']"}],attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}}),r("el-dialog",{attrs:{title:e.title,visible:e.open,fullscreen:"","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":"top","label-width":"200px"}},[r("el-row",{attrs:{gutter:40}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"文章标题（英语）",prop:"titleen"}},[r("el-input",{attrs:{placeholder:"请输入博客标题"},model:{value:e.form.titleen,callback:function(t){e.$set(e.form,"titleen",t)},expression:"form.titleen"}})],1),r("el-form-item",{attrs:{label:"文章内容（英语）",prop:"contenten"}},[r("editor",{ref:"editor",attrs:{"min-height":192,height:360},model:{value:e.form.contenten,callback:function(t){e.$set(e.form,"contenten",t)},expression:"form.contenten"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"文章标题（西班牙语）",prop:"titlees"}},[r("el-input",{attrs:{placeholder:"请输入博客标题"},model:{value:e.form.titlees,callback:function(t){e.$set(e.form,"titlees",t)},expression:"form.titlees"}})],1),r("el-form-item",{attrs:{label:"文章内容（西班牙语）",prop:"contentes"}},[r("editor",{ref:"editor",attrs:{"min-height":192,height:360},model:{value:e.form.contentes,callback:function(t){e.$set(e.form,"contentes",t)},expression:"form.contentes"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"文章标题（阿拉伯语语）",prop:"titlear"}},[r("el-input",{attrs:{placeholder:"请输入博客标题"},model:{value:e.form.titlear,callback:function(t){e.$set(e.form,"titlear",t)},expression:"form.titlear"}})],1),r("el-form-item",{attrs:{label:"文章内容（阿拉伯语）",prop:"contentar"}},[r("editor",{ref:"editor",staticClass:"editor-ar",attrs:{"min-height":192,height:360},model:{value:e.form.contentar,callback:function(t){e.$set(e.form,"contentar",t)},expression:"form.contentar"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-row",{attrs:{gutter:40,type:"flex"}},[r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"显示排序",prop:"sort"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:0},model:{value:e.form.sort,callback:function(t){e.$set(e.form,"sort",t)},expression:"form.sort"}})],1)],1),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"分类",prop:"categoryId"}},[r("el-cascader",{attrs:{options:e.categoryOptions,props:{checkStrictly:!0,multiple:!1,value:"id",label:"name",children:"children",emitPath:!1},placeholder:"请选择文章分类",clearable:""},model:{value:e.form.categoryId,callback:function(t){e.$set(e.form,"categoryId",t)},expression:"form.categoryId"}})],1)],1),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"发布状态",prop:"status"}},[r("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.dict.type.article_publish_status,(function(t){return r("el-radio",{key:t.value,attrs:{label:parseInt(t.value)}},[e._v(e._s(t.label))])})),1)],1)],1)],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确 定")]),r("el-button",{on:{click:e.cancel}},[e._v("取 消")])],1)],1)],1)},a=[],i=r("15fd"),s=(r("b0c0"),r("4e82"),r("d81d"),r("d3b7"),r("b64b"),r("e9c4"),r("159b"),r("9a2a")),l=r("e2fb"),o=(r("5f87"),["titlees","titleen","titlear","summarizees","summarizeen","summarizear","imageUrles","imageUrlen","imageUrlar","contentes","contenten","contentar"]),u={name:"Article",dicts:["article_publish_status"],data:function(){return{changeCount:0,loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,articleList:[],title:"",open:!1,tagOptions:[],categoryOptions:[],imageUploader:{custom:!1,fileType:"file",fileNameType:"",imagePrefix:this.fileUploadHost,type:"server",url:"/api/common/upload"},queryParams:{pageNum:1,pageSize:10,pageType:1,title:null,summarize:null,status:null,categoryId:null},defaultSort:{prop:"updateTime",order:"descending"},form:{},rules:{titleen:[{required:!0,message:"文章标题不能为空",trigger:"blur"}],titlees:[{required:!0,message:"文章标题不能为空",trigger:"blur"}],titlear:[{required:!0,message:"文章标题不能为空",trigger:"blur"}],contenten:[{required:!0,message:"文章内容不能为空",trigger:"blur"}],contentes:[{required:!0,message:"文章内容不能为空",trigger:"blur"}],contentar:[{required:!0,message:"文章内容不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}],sort:[{required:!0,message:"排序字段不能为空",trigger:"blur"}],categoryId:[{required:!0,message:"类型不能为空",trigger:"change"}]}}},created:function(){this.getList(),this.getNewsType()},methods:{getList:function(){var e=this;this.loading=!0,Object(s["d"])(this.queryParams).then((function(t){e.articleList=t.rows,e.total=t.total,e.loading=!1}))},getTagArray:function(e){return e?e.split(","):[]},categoryFormat:function(e){var t=e,r=this.categoryOptions,n="",a=!1;function i(e,t){if(!a)for(var r=0;r<e.length;r++)e[r].id==t?(a=!0,n=e[r]):null!=e[r].children&&i(e[r].children,t)}return i(r,t),n.name},previewArticle:function(e){0!=e.isPublish?window.open("https://www.baicintl.com/article/"+e.articleId):this.$modal.msgError("文章暂未发布，无法进行浏览")},cancel:function(){this.open=!1,this.reset()},reset:function(){this.changeCount=0,this.form={id:null,titleen:null,titlees:null,titlear:null,summarizeen:null,summarizees:null,summarizear:null,contenten:null,contentes:null,contentar:null,imageUrlen:null,imageUrles:null,imageUrlar:null,categoryId:null,sort:null,status:1,remark:null,params:{},createTime:null,createBy:null,updateTime:null,updateBy:null,pageType:1,recommend:0,newsLangs:[]},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.$refs.tables.sort(this.defaultSort.prop,this.defaultSort.order),this.handleQuery()},handleSelectionChange:function(e){this.ids=e.map((function(e){return e.id})),this.single=1!==e.length,this.multiple=!e.length},handleSortChange:function(e,t,r){this.queryParams.orderByColumn=e.prop,this.queryParams.isAsc=e.order,this.getList()},getNewsType:function(){var e=this,t={menuType:"3"};Object(l["e"])(t).then((function(t){e.categoryOptions=e.getTreeData(t.data)}))},getTreeData:function(e){for(var t=0;t<e.length;t++)e[t].children.length<1?e[t].children=null:this.getTreeData(e[t].children);return e},resolveFormData:function(){var e=this,t=["en","es","ar"],r=[];if(this.form.newsLangs.length<1){var n={createBy:"",createTime:"",id:null,params:{},remark:"",updateBy:"",updateTime:""};t.forEach((function(t){var a=JSON.parse(JSON.stringify(n));a.language=t,a.title=e.form["title"+t],a.summarize=e.form["summarize"+t],a.imageUrl=e.form["imageUrl"+t],a.content=e.form["content"+t],r.push(a)}))}else r=this.form.newsLangs,r.forEach((function(t,n){r[n].title=e.form["title"+t.language],r[n].summarize=e.form["summarize"+t.language],r[n].imageUrl=e.form["imageUrl"+t.language],r[n].content=e.form["content"+t.language]}));var a=this.form,s=(a.titlees,a.titleen,a.titlear,a.summarizees,a.summarizeen,a.summarizear,a.imageUrles,a.imageUrlen,a.imageUrlar,a.contentes,a.contenten,a.contentar,Object(i["a"])(a,o));return s.newsLangs=r,s},handleAdd:function(){this.title="添加overview文章",this.reset(),this.open=!0},handleUpdate:function(e){var t=this,r=this.$loading({lock:!0,text:"正在加载中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});this.reset();var n=e.id||this.ids;Object(s["c"])(n).then((function(e){r.close();var n=e.data,a=e.data.newsLangs;a.map((function(e){n["imageUrl"+e.language]=e.imageUrl,n["content"+e.language]=e.content,n["title"+e.language]=e.title,n["summarize"+e.language]=e.summarize})),t.form=n,t.open=!0,t.title="修改overview文章"}))},submitForm:function(){var e=this;this.$refs["form"].validate((function(t){if(t){var r=e.resolveFormData();null!=e.form.id?Object(s["e"])(r).then((function(t){e.$modal.msgSuccess("修改成功"),e.open=!1,e.getList()})):Object(s["a"])(r).then((function(t){localStorage.removeItem("articleForm"),e.$modal.msgSuccess("新增成功"),e.open=!1,e.getList()}))}}))},handleDelete:function(e){var t=this,r=e.id||this.ids;this.$modal.confirm('是否确认删除文章编号为"'+r+'"的数据项?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["b"])(r)})).then((function(){t.getList(),t.$modal.msgSuccess("删除成功")})).catch((function(){}))},save:function(e){this.form.content=e}}},c=u,m=(r("7eed"),r("2877")),d=Object(m["a"])(c,n,a,!1,null,"6c8ce99a",null);t["default"]=d.exports}}]);