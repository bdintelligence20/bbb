(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-commons"],{"1d3c":function(e,t,i){},2553:function(e,t,i){},"276c":function(e,t,i){"use strict";i("78db")},"5f79":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"新建文件夹",visible:e.dialogStatus,"close-on-click-modal":!1,width:"550px"},on:{"update:visible":function(t){e.dialogStatus=t}}},[i("el-form",{ref:"addFolderForm",staticClass:"add-folder-form",attrs:{model:e.form,rules:e.formRules,"label-width":"100px","label-position":"top"}},[i("el-form-item",{attrs:{label:"文件夹名称",prop:"fileName"}},[i("el-input",{attrs:{placeholder:"请输入文件夹名称",type:"textarea",autosize:"",maxlength:"255","show-word-limit":""},model:{value:e.form.fileName,callback:function(t){e.$set(e.form,"fileName",t)},expression:"form.fileName"}})],1),i("el-form-item",{attrs:{label:"文件夹图片",prop:"dirCover"}},[i("imageUpload",{attrs:{limit:1},model:{value:e.form.dirCover,callback:function(t){e.$set(e.form,"dirCover",t)},expression:"form.dirCover"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.handleAddFolderDialogCancel("addFolderForm")}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.handleAddFolderDialogOk("addFolderForm")}}},[e._v("确 定")])],1)],1)},l=[],n=i("8889"),o={name:"AddFolderDialog",props:{visible:{type:Boolean,required:!0},filePath:{required:!0,type:String}},data:function(){return{form:{fileName:""},formRules:{fileName:[{required:!0,message:"请输入文件夹名称",trigger:"blur"}]},loading:!1}},computed:{dialogStatus:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{handleAddFolderDialogCancel:function(e){this.dialogStatus=!1,this.$refs[e].resetFields()},handleAddFolderDialogOk:function(e){var t=this;this.$refs[e].validate((function(i){if(!i)return!1;t.loading=!0,Object(n["g"])({fileName:t.form.fileName,dirCover:t.form.dirCover,filePath:t.filePath,isDir:1}).then((function(i){t.loading=!1,t.$message.success("添加成功"),t.dialogStatus=!1,t.$refs[e].resetFields(),t.$emit("confirmDialog")}))}))}}},r=o,s=i("2877"),c=Object(s["a"])(r,a,l,!1,null,null,null);t["a"]=c.exports},"6ccc":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"breadcrumb-wrapper"},[i("el-breadcrumb",[i("el-breadcrumb-item",[e._v(" 当前位置： ")])],1),i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:e.routerIndex(e.fileType)}},[e._v(" "+e._s(e.fileTypeMap[e.fileType])+" ")])],1),i("el-breadcrumb",{attrs:{separator:"/"}},e._l(e.breadCrumbList,(function(t,a){return i("el-breadcrumb-item",{key:a,attrs:{to:e.getRouteQuery(t)}},[e._v(e._s(t.name))])})),1)],1)},l=[],n=(i("a9e3"),i("a15b"),i("b0c0"),{name:"BreadCrumb",props:{fileType:{required:!0,type:Number}},data:function(){return{fileTypeMap:{0:"全部",1:"全部图片",2:"全部文档",3:"全部视频",4:"全部音乐",5:"其他",6:"回收站"}}},computed:{breadCrumbList:{get:function(){for(var e=this.$route.query.filePath,t=e?e.split("/"):[],i=[],a=[],l=0;l<t.length;l++)0===l?(t[l]="/",a.push(t[l]),i.push({path:this.$router.path,name:this.$route.meta.breadCrumbName})):t[l]&&(a.push(t[l]+"/"),i.push({path:a.join(""),name:t[l]}));return i},set:function(){return[]}}},methods:{routerIndex:function(e){var t=this.$router.path;return{query:{filePath:"/",fileType:e},path:t}},getRouteQuery:function(e){var t=this.$route.name;return"Share"===t?{query:{filePath:e.path}}:"MyShare"===t?{query:{filePath:e.path?e.path:"/",shareBatchNum:"/"===e.path?void 0:this.$route.query.shareBatchNum}}:{query:{filePath:e.path,fileType:this.fileType}}}}}),o=n,r=(i("8d12"),i("2877")),s=Object(r["a"])(o,a,l,!1,null,"53e37d70",null);t["a"]=s.exports},"78db":function(e,t,i){},"7a46":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-table-wrapper"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"file-table",class:["file-type-"+e.fileType,"Share"===e.routeName?"share":"MyShare"===e.routeName?"my-share":""],attrs:{fit:"","element-loading-text":"文件加载中……","tooltip-effect":"dark",data:e.fileList},on:{"selection-change":e.handleSelectRow,"sort-change":e.handleSortChange}},[i("el-table-column",{key:"selection",attrs:{type:"selection",width:"55"}}),i("el-table-column",{key:"isDir",attrs:{label:"",prop:"isDir",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("img",{staticStyle:{width:"30px","max-height":"30px",cursor:"pointer"},attrs:{src:e.setFileImg(t.row)},on:{click:function(i){return e.handleFileNameClick(t.row,t.$index,e.fileList)}}})]}}])}),i("el-table-column",{key:"fileName",attrs:{prop:"fileName","sort-by":["isDir","fileName"],sortable:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{cursor:"pointer"},on:{click:function(i){return e.handleFileNameClick(t.row,t.$index,e.fileList)}}},[e._v(" "+e._s(e._f("fileNameComplete")(t.row))+" ")])]}}])},[i("template",{slot:"header"},[i("span",[e._v("文件名")])])],2),Number(e.$route.query.fileType)?i("el-table-column",{key:"filePath",attrs:{label:6===e.fileType?"原路径":"路径",prop:"filePath","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticStyle:{cursor:"pointer"},attrs:{title:"点击跳转"},on:{click:function(i){return e.$router.push({query:{filePath:t.row.filePath,fileType:0}})}}},[e._v(e._s(t.row.filePath))])]}}],null,!1,1497694662)}):e._e(),e.selectedColumnList.includes("extendName")?i("el-table-column",{key:"extendName",attrs:{label:"类型",width:"80",prop:"extendName","sort-by":["isDir","extendName"],sortable:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.extendName?i("span",[e._v(e._s(t.row.extendName))]):i("span",[e._v("文件夹")])]}}],null,!1,3711996889)}):e._e(),e.selectedColumnList.includes("fileSize")?i("el-table-column",{key:"fileSize",attrs:{label:"大小",width:"80",prop:"fileSize","sort-by":["isDir","fileSize"],sortable:"","show-overflow-tooltip":"",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",{staticStyle:{padding:"0 10px"}},[e._v(" "+e._s(e.calculateFileSize(t.row.fileSize))+" ")])]}}],null,!1,1368971103)}):e._e(),e.selectedColumnList.includes("uploadTime")&&![7,8].includes(e.fileType)?i("el-table-column",{key:"uploadTime",attrs:{label:"修改日期",prop:"uploadTime",width:"180","sort-by":["isDir","uploadTime"],sortable:"",align:"center"}}):e._e(),6===e.fileType&&e.selectedColumnList.includes("deleteTime")?i("el-table-column",{key:"deleteTime",attrs:{label:"删除日期",prop:"deleteTime",width:"180","sort-by":["isDir","deleteTime"],sortable:"",align:"center"}}):e._e(),"MyShare"===e.routeName?i("el-table-column",{key:"shareType",attrs:{label:"分享类型",prop:"shareType",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1===t.row.shareType?"私密":"公共")+" ")]}}],null,!1,1274152603)}):e._e(),"MyShare"===e.routeName?i("el-table-column",{key:"shareTime",attrs:{label:"分享时间",prop:"shareTime",width:"180","sort-by":["isDir","shareTime"],"show-overflow-tooltip":"",sortable:"",align:"center"}}):e._e(),"MyShare"===e.routeName?i("el-table-column",{key:"endTime",attrs:{label:"过期时间",prop:"endTime",width:"190","sort-by":["isDir","endTime"],"show-overflow-tooltip":"",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e.getFileShareStatus(t.row.endTime)?i("i",{staticClass:"el-icon-warning"}):i("i",{staticClass:"el-icon-time"}),e._v(" "+e._s(t.row.endTime)+" ")])]}}],null,!1,3041030670)}):e._e(),i("el-table-column",{key:"action",attrs:{width:e.operaColumnWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[e.operaColumnExpand?i("div",[e.deleteBtnShow?i("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(i){return e.handleDeleteFileBtnClick(t.row)}}},[e._v("删除")]):e._e(),e.restoreBtnShow?i("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(i){return e.handleRestoreFileBtnClick(t.row)}}},[e._v("还原")]):e._e(),e.moveBtnShow?i("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(i){return e.handleMoveFileBtnClick(t.row)}}},[e._v("移动")]):e._e(),e.renameBtnShow?i("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(i){return e.handleRenameFileBtnClick(t.row)}}},[e._v("重命名")]):e._e(),e.shareBtnShow?i("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(i){return e.handleShareFileBtnClick(t.row)}}},[e._v("分享")]):e._e(),e.downloadBtnShow?i("el-button",{attrs:{type:"text",size:"mini"}},[i("a",{staticStyle:{display:"block",color:"inherit"},attrs:{target:"_blank",href:e.getDownloadFilePath(t.row)}},[e._v("下载")])]):e._e(),e.unzipBtnShow&&["zip","rar"].includes(t.row.extendName)?i("el-button",{attrs:{type:"text",size:"mini"},nativeOn:{click:function(i){return e.handleUnzipFileBtnClick(t.row)}}},[e._v("解压缩")]):e._e(),e.copyLinkBtnShow?i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(i){return e.copyShareLink(t.row.shareBatchNum,t.row.extractionCode)}}},[e._v("复制链接")]):e._e()],1):i("el-dropdown",{attrs:{trigger:"click"}},[i("el-button",{attrs:{size:"mini"}},[e._v(" 操作 "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.deleteBtnShow?i("el-dropdown-item",{nativeOn:{click:function(i){return e.handleDeleteFileBtnClick(t.row)}}},[e._v("删除")]):e._e(),e.restoreBtnShow?i("el-dropdown-item",{nativeOn:{click:function(i){return e.handleRestoreFileBtnClick(t.row)}}},[e._v("还原")]):e._e(),e.moveBtnShow?i("el-dropdown-item",{nativeOn:{click:function(i){return e.handleMoveFileBtnClick(t.row)}}},[e._v("移动")]):e._e(),e.renameBtnShow?i("el-dropdown-item",{nativeOn:{click:function(i){return e.handleRenameFileBtnClick(t.row)}}},[e._v("重命名")]):e._e(),e.shareBtnShow?i("el-dropdown-item",{nativeOn:{click:function(i){return e.handleShareFileBtnClick(t.row)}}},[e._v("分享")]):e._e(),e.downloadBtnShow?i("el-dropdown-item",[i("a",{staticStyle:{display:"block",color:"inherit"},attrs:{target:"_self",href:e.getDownloadFilePath(t.row)}},[e._v("下载")])]):e._e(),e.unzipBtnShow&&["zip","rar"].includes(t.row.extendName)?i("el-dropdown-item",{nativeOn:{click:function(i){return e.handleUnzipFileBtnClick(t.row)}}},[e._v("解压缩")]):e._e(),e.copyLinkBtnShow?i("el-dropdown-item",{nativeOn:{click:function(i){return e.copyShareLink(t.row.shareBatchNum,t.row.extractionCode)}}},[e._v("复制链接")]):e._e()],1)],1)]}}])},[i("template",{slot:"header"},[i("span",[e._v("操作")]),i("i",{staticClass:"el-icon-circle-plus",attrs:{title:"展开"},on:{click:function(t){e.operaColumnExpand=!0}}}),i("i",{staticClass:"el-icon-remove",attrs:{title:"折叠"},on:{click:function(t){e.operaColumnExpand=!1}}})])],2)],1)],1)},l=[],n=i("5530"),o=(i("a9e3"),i("caad"),i("2532"),i("d81d"),i("b0c0"),i("99af"),i("8889")),r=i("2f62"),s=i("5f87"),c={name:"FileTable",props:{fileType:{required:!0,type:Number},filePath:{required:!0,type:String},fileList:{required:!0,type:Array},loading:{required:!0,type:Boolean}},data:function(){return{headers:{Authorization:"Bearer "+Object(s["a"])()},operaColumnExpand:this.getCookies("operaColumnExpand")||!1,fileImgTypeList:["png","jpg","jpeg","docx","doc","ppt","pptx","xls","xlsx","avi","mp4","css","csv","chm","rar","zip","dmg","mp3","open","pdf","rtf","txt","oa","js","html","img","sql","jar","svg","gif","json","exe"],fileImgMap:{dir:i("a6b2"),chm:i("d96c"),css:i("ff46"),csv:i("fe4b"),png:i("1c7b"),jpg:i("1c7b"),jpeg:i("1c7b"),docx:i("25e5"),doc:i("25e5"),ppt:i("f99d"),pptx:i("f99d"),xls:i("1746"),xlsx:i("1746"),mp4:i("f07d"),avi:i("a04a"),rar:i("8e01"),zip:i("dbd8"),dmg:i("149f"),mp3:i("b294"),open:i("6e39"),pdf:i("3469"),rtf:i("e63a"),txt:i("fb8b"),oa:i("30f0"),unknown:i("0554"),js:i("dc76"),html:i("ea33"),img:i("79e8"),sql:i("8c7b"),jar:i("25a5"),svg:i("a4b3"),gif:i("e79b"),json:i("1909"),exe:i("6d84")},downloadFilePath:"",viewFilePath:"",audioObj:{src:""},sortedFileList:[]}},computed:Object(n["a"])(Object(n["a"])({},Object(r["b"])(["selectedColumnList"])),{},{isIncludeNormalFile:function(){return this.fileList.map((function(e){return e.isDir})).includes(0)},isIncludeZipRarFile:function(){return this.fileList.map((function(e){return e.extendName})).includes("zip")||this.fileList.map((function(e){return e.extendName})).includes("rar")},operaColumnWidth:function(){return["Share","MyShare"].includes(this.routeName)?100:6===this.fileType?120:this.operaColumnExpand?this.isIncludeNormalFile?this.isIncludeZipRarFile?270:230:200:100},routeName:function(){return this.$route.name},deleteBtnShow:function(){return!["Share","MyShare"].includes(this.routeName)},restoreBtnShow:function(){return 6===this.fileType&&!["Share","MyShare"].includes(this.routeName)},moveBtnShow:function(){return 6!==this.fileType&&!["Share","MyShare"].includes(this.routeName)},renameBtnShow:function(){return 6!==this.fileType&&!["Share","MyShare"].includes(this.routeName)},shareBtnShow:function(){return 6!==this.fileType&&!["Share","MyShare"].includes(this.routeName)},downloadBtnShow:function(){return 6!==this.fileType&&!["MyShare"].includes(this.routeName)},unzipBtnShow:function(){return 6!==this.fileType&&!["Share","MyShare"].includes(this.routeName)},copyLinkBtnShow:function(){return"MyShare"===this.routeName}}),watch:{filePath:function(){this.clearSelectedTable(),this.$refs.multipleTable.clearSort()},fileType:function(){this.clearSelectedTable(),this.$refs.multipleTable.clearSort()},fileList:function(){this.clearSelectedTable(),this.$refs.multipleTable.clearSort(),this.sortedFileList=this.fileList},operaColumnExpand:function(e){this.setCookies("operaColumnExpand",e)}},created:function(){this.operaColumnExpand="true"===this.getCookies("operaColumnExpand")},methods:{handleSortChange:function(){this.sortedFileList=this.$refs.multipleTable.tableData},clearSelectedTable:function(){this.$refs.multipleTable.clearSelection(),this.$emit("setSelectionFile",[])},setFileImg:function(e){return e.extendName?this.fileImgTypeList.includes(e.extendName)?6!==this.fileType&&["jpg","png","jpeg","gif"].includes(e.extendName)?this.getImgMinPath(e):this.fileImgMap[e.extendName]:this.fileImgMap.unknown:this.fileImgMap.dir},getFileShareStatus:function(e){return!(new Date(e).getTime()>(new Date).getTime())},handleFileNameClick:function(e,t){var i=this;if(e.isDir)"Share"===this.routeName?this.$router.push({query:{filePath:e.shareFilePath+e.fileName+"/"}}):"MyShare"===this.routeName?this.$router.push({query:{filePath:e.shareFilePath+e.fileName+"/",shareBatchNum:e.shareBatchNum}}):this.$router.push({query:{filePath:e.filePath+e.fileName+"/",fileType:0}});else{var a=["png","jpg","jpeg","gif","svg"];if(a.includes(e.extendName))if(1===this.fileType){var l={imgPreviewVisible:!0,imgPreviewList:this.sortedFileList.map((function(e){return{fileUrl:i.getViewFilePath(e),downloadLink:i.getDownloadFilePath(e),fileName:e.fileName,extendName:e.extendName}})),activeIndex:t};this.$store.commit("setImgPreviewData",l)}else{var o={imgPreviewVisible:!0,imgPreviewList:[{fileUrl:this.getViewFilePath(e),downloadLink:this.getDownloadFilePath(e),fileName:e.fileName,extendName:e.extendName}],activeIndex:0};this.$store.commit("setImgPreviewData",o)}["ppt","pptx","doc","docx","xls","xlsx"].includes(e.extendName)&&window.open(this.getFileOnlineViewPathByOffice(e),"_blank");var r=["html","js","css","json","c","java","txt","pdf"];r.includes(e.extendName)&&window.open(this.getViewFilePath(e),"_blank");var s=["mp4"];if(s.includes(e.extendName))if(3===this.fileType){var c={videoPreviewVisible:!0,videoPreviewList:this.sortedFileList.map((function(e){return Object(n["a"])(Object(n["a"])({},e),{},{fileUrl:i.getViewFilePath(e),downloadLink:i.getDownloadFilePath(e),fileName:e.fileName,extendName:e.extendName})})),activeIndex:t};this.$store.commit("setVideoPreviewData",c)}else{var d={videoPreviewVisible:!0,videoPreviewList:[Object(n["a"])(Object(n["a"])({},e),{},{fileUrl:this.getViewFilePath(e),downloadLink:this.getDownloadFilePath(e),fileName:e.fileName,extendName:e.extendName})],activeIndex:0};this.$store.commit("setVideoPreviewData",d)}var u=["mp3"];u.includes(e.extendName)&&this.audioObj.src!==this.getViewFilePath(e)&&(this.$notify.closeAll(),this.audioObj.src=this.getViewFilePath(e),this.$notify({title:"".concat(e.fileName,".").concat(e.extendName),dangerouslyUseHTMLString:!0,message:'<audio class="audio-preview" src="'.concat(this.audioObj.src,'" controls autoplay style="padding-right: 16px; margin-top: 16px;"></audio>'),duration:0,offset:100,onClose:function(){i.audioObj.src=""}}))}},handleSelectRow:function(e){this.$emit("setSelectionFile",e)},handleMoveFileBtnClick:function(e){this.$emit("setOperationFile",e),this.$emit("setMoveFileDialogData",!1,!0)},handleUnzipFileBtnClick:function(e){var t=this,i=this.$loading({lock:!0,text:"正在解压缩，请稍等片刻...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});Object(o["w"])(e).then((function(e){t.$emit("getTableDataByType"),t.$store.dispatch("showStorage"),t.$modal.msgSuccess("解压成功"),i.close()}))},handleDeleteFileBtnClick:function(e){var t=this;6===this.fileType?this.$modal.confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.confirmDeleteFile(e,!0)})).catch((function(){t.$message({type:"info",message:"已取消删除"})})):this.$modal.confirm("删除后可在回收站查看, 是否继续删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.confirmDeleteFile(e,!1)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},confirmDeleteFile:function(e,t){var i=this;t?Object(o["i"])({recoveryFileId:e.recoveryFileId}).then((function(e){i.$emit("getTableDataByType"),i.$store.dispatch("showStorage"),i.$modal.msgSuccess("删除成功")})):Object(o["h"])(e).then((function(e){i.$emit("getTableDataByType"),i.$store.dispatch("showStorage"),i.$modal.msgSuccess("删除成功")}))},handleRestoreFileBtnClick:function(e){var t=this;Object(o["s"])({deleteBatchNum:e.deleteBatchNum,filePath:e.filePath}).then((function(e){t.$emit("getTableDataByType"),t.$store.dispatch("showStorage"),t.$modal.msgSuccess("已还原")}))},handleRenameFileBtnClick:function(e){var t=this,i=e.fileName;this.$prompt("请输入文件名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:i,inputPattern:/\S/,inputErrorMessage:"请输入文件名",closeOnClickModal:!1}).then((function(i){var a=i.value;e.oldFileName=e.fileName,e.fileName=a,t.confirmRenameFile(e)})).catch((function(){t.$message({type:"info",message:"取消输入"})}))},confirmRenameFile:function(e){var t=this;Object(o["r"])(e).then((function(e){t.$emit("getTableDataByType"),t.$store.dispatch("showStorage"),t.$modal.msgSuccess("重命名成功")}))},handleShareFileBtnClick:function(e){this.$emit("setSelectionFile",[e]),this.$emit("setShareFileDialogData")}}},d=c,u=(i("97fc"),i("2877")),h=Object(u["a"])(d,a,l,!1,null,"22131e7b",null);t["a"]=h.exports},"8d12":function(e,t,i){"use strict";i("2553")},"97fc":function(e,t,i){"use strict";i("1d3c")},"9f38":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"move-dialog-wrapper"},[i("el-dialog",{attrs:{title:"选择目标路径",visible:e.dialogData.visible},on:{"update:visible":function(t){return e.$set(e.dialogData,"visible",t)},open:e.handleDialogOpen}},[i("div",{staticClass:"el-dialog-div"},[i("div",{staticClass:"target-path"},[i("span",{staticClass:"label"},[e._v("目标路径：")]),i("el-input",{staticClass:"content",attrs:{readonly:"",size:"small"},model:{value:e.targetPath,callback:function(t){e.targetPath=t},expression:"targetPath"}})],1),i("el-tree",{attrs:{data:e.fileTree,props:e.defaultProps,"highlight-current":!0,"expand-on-click-node":!1,"default-expanded-keys":e.defaultExpandedKeys,"node-key":"id"},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,l=t.data;return i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"label"},[e._v(e._s(a.label))]),i("el-button",{staticClass:"add-folder-btn",attrs:{type:"text",size:"mini"},on:{click:function(t){return t.stopPropagation(),e.handleAddFolderBtnClick(l)}}},[e._v(" 新建文件夹 ")])],1)}}])})],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.$emit("setDialogData",null,!1)}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$emit("confirmDialog")}}},[e._v("确 定")])],1)]),i("AddFolderDialog",{attrs:{visible:e.dialogAddFolder.visible,filePath:e.dialogAddFolder.filePath},on:{"update:visible":function(t){return e.$set(e.dialogAddFolder,"visible",t)},confirmDialog:function(t){return e.initFileTree(e.dialogAddFolder.id)}}})],1)},l=[],n=i("5f79"),o=i("8889"),r={name:"MoveFileDialog",props:{dialogData:Object},components:{AddFolderDialog:n["a"]},data:function(){return{targetPath:"/",defaultProps:{children:"children",label:"label"},fileTree:[],defaultExpandedKeys:[],dialogAddFolder:{visible:!1,filePath:"/",id:-1}}},methods:{handleDialogOpen:function(){this.initFileTree()},initFileTree:function(e){var t=this;Object(o["l"])().then((function(i){t.fileTree=[i.data],t.defaultExpandedKeys=e?[e]:[t.fileTree[0].id]}))},handleNodeClick:function(e){this.targetPath=e.filePath?e.filePath:"/",this.$emit("setSelectFilePath",this.targetPath)},handleAddFolderBtnClick:function(e){this.dialogAddFolder.filePath=e.filePath?e.filePath:"/",this.dialogAddFolder.id=e.id,this.dialogAddFolder.visible=!0}}},s=r,c=(i("276c"),i("2877")),d=Object(c["a"])(s,a,l,!1,null,"2aff8f7a",null);t["a"]=d.exports}}]);