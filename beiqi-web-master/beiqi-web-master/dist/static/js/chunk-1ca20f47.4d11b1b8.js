(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ca20f47","chunk-50d9b40e"],{4796:function(e,t,i){"use strict";i("887b")},7840:function(e,t,i){},"887b":function(e,t,i){},9204:function(e,t,i){"use strict";i("7840")},dd8d:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"operation-menu-wrapper",class:"file-type-"+e.fileType},[i("el-button-group",{staticClass:"operate-group"},[0===e.fileType?i("el-dropdown",{staticClass:"drop-btn",attrs:{trigger:"hover"}},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-upload2",id:"uploadFileId"}},[e._v("上传文件"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(t){return e.handleUploadFileBtnClick(!0)}}},[e._v("直接添加")]),i("el-dropdown-item",{attrs:{title:"截图粘贴或拖拽上传"},nativeOn:{click:function(t){return e.handleUploadFileBtnClick(!1)}}},[e._v("拖拽上传")])],1)],1):e._e(),e.fileType||6===e.fileType?e._e():i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogAddFolder.visible=!0}}},[e._v("新建文件夹")]),i("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.selectionFile.length,icon:"el-icon-delete"},on:{click:function(t){return e.handleBatchDeleteBtnClick()}}},[e._v("批量删除")]),e.fileType||6===e.fileType?e._e():i("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.selectionFile.length,icon:"el-icon-rank"},on:{click:function(t){return e.handleBatchMoveBtnClick()}}},[e._v("批量移动")]),6!==e.fileType?i("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.selectionFile.length,icon:"el-icon-download"},on:{click:function(t){return e.handleBatchDownloadBtnClick()}}},[e._v("批量下载")]):e._e(),6!==e.fileType&&"Share"!==e.$route.name?i("el-button",{attrs:{size:"mini",type:"primary",disabled:!e.selectionFile.length,icon:"el-icon-share"},on:{click:function(t){return e.handleBatchShareBtnClick()}}},[e._v("分享")]):e._e()],1),0===e.fileType?i("el-input",{staticClass:"select-file-input",attrs:{placeholder:"搜索您的文件",size:"mini",maxlength:"255",clearable:!0},on:{change:e.handleSearchInputChange,clear:function(t){return e.$emit("getTableDataByType")}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearchInputChange(e.searchFile.fileName)}},model:{value:e.searchFile.fileName,callback:function(t){e.$set(e.searchFile,"fileName",t)},expression:"searchFile.fileName"}},[i("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix",title:"点击搜索"},on:{click:e.handleSearchClick},slot:"prefix"})]):e._e(),1===e.fileModel?i("i",{staticClass:"batch-icon el-icon-finished",class:e.batchOperate?"active":"",attrs:{title:e.batchOperate?"取消批量操作":"批量操作"},on:{click:function(t){return e.handleBatchOperationChange()}}}):e._e(),1===e.fileModel?i("el-divider",{attrs:{direction:"vertical"}}):e._e(),i("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[i("i",{staticClass:"setting-icon el-icon-setting",attrs:{slot:"reference"},slot:"reference"}),i("SelectColumn"),i("el-divider",{staticClass:"split-line"}),i("div",{staticClass:"change-file-model"},[i("div",{staticClass:"title"},[e._v("查看模式")]),i("el-radio-group",{attrs:{size:"mini"},on:{change:e.handleFileDisplayModelChange},model:{value:e.fileGroupLable,callback:function(t){e.fileGroupLable=t},expression:"fileGroupLable"}},[i("el-radio-button",{attrs:{label:0}},[i("i",{staticClass:"el-icon-tickets"}),e._v(" 列表 ")]),i("el-radio-button",{attrs:{label:1}},[i("i",{staticClass:"el-icon-s-grid"}),e._v(" 网格 ")]),1===e.fileType?i("el-radio-button",{attrs:{label:2}},[i("i",{staticClass:"el-icon-date"}),e._v(" 时间线 ")]):e._e()],1)],1),1===e.fileGroupLable||2===e.fileGroupLable?i("div",{staticClass:"change-grid-size"},[i("div",{staticClass:"title"},[e._v("调整图标大小")]),i("el-slider",{attrs:{min:40,max:150,step:10,"format-tooltip":e.formatTooltip},model:{value:e.gridSize,callback:function(t){e.gridSize=t},expression:"gridSize"}})],1):e._e()],1),i("AddFolderDialog",{attrs:{visible:e.dialogAddFolder.visible,filePath:e.filePath},on:{"update:visible":function(t){return e.$set(e.dialogAddFolder,"visible",t)},confirmDialog:function(t){return e.$emit("getTableDataByType")}}}),e._l(e.selectionFile,(function(t,l){return i("a",{key:l,ref:"downloadLink"+l,refInFor:!0,attrs:{target:"_blank",href:e.getDownloadFilePath(t),download:t.fileName+"."+t.extendName,title:"downloadLink"+l}})}))],2)},n=[],a=(i("a9e3"),i("e9c4"),i("8889")),o=i("5f79"),s=i("ec30"),c={name:"OperationMenu",props:{fileType:{required:!0,type:Number},filePath:{required:!0,type:String},selectionFile:Array,operationFile:Object,batchOperate:Boolean},components:{AddFolderDialog:o["a"],SelectColumn:s["default"]},data:function(){return{searchFile:{fileName:""},dialogAddFolder:{visible:!1},batchDeleteFileDialog:!1,fileGroupLable:0,vueAppBaseApi:"/api"}},computed:{uploadFileData:{get:function(){var e={filePath:this.filePath,isDir:0};return e},set:function(){return{filePath:"/",isDir:0}}},fileModel:function(){return this.$store.getters.fileModel},gridSize:{get:function(){return this.$store.getters.gridSize},set:function(e){this.$store.commit("changeGridSize",e)}}},watch:{fileType:function(e,t){1===t&&2===this.fileModel&&(this.$store.commit("changeFileModel",0),this.fileGroupLable=0)}},mounted:function(){var e=this;this.fileGroupLable=this.fileModel,this.$EventBus.$on("refreshList",(function(){e.$emit("getTableDataByType")})),this.$EventBus.$on("refreshStorage",(function(){e.$store.dispatch("showStorage")}))},methods:{handleUploadFileBtnClick:function(e){this.$EventBus.$emit("openUploader",this.uploadFileData,e)},handleBatchDeleteBtnClick:function(){var e=this;6===this.fileType?this.$modal.confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.confirmBatchDeleteFile(!0)})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):this.$modal.confirm("删除后可在回收站查看, 是否继续删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.confirmBatchDeleteFile(!1)})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},confirmBatchDeleteFile:function(e){var t=this;e?Object(a["b"])({recoveryFileIds:JSON.stringify(this.selectionFile)}).then((function(e){t.$message({message:"删除成功",type:"success"}),t.$emit("getTableDataByType"),t.$store.dispatch("showStorage")})):Object(a["a"])({files:JSON.stringify(this.selectionFile)}).then((function(e){t.$message({message:"删除成功",type:"success"}),t.$emit("getTableDataByType"),t.$store.dispatch("showStorage")}))},handleBatchMoveBtnClick:function(){this.$emit("setMoveFileDialogData",!0,!0)},handleBatchShareBtnClick:function(){this.$emit("setShareFileDialogData")},handleBatchDownloadBtnClick:function(){for(var e=0;e<this.selectionFile.length;e++){var t="downloadLink"+e;this.$refs[t][0].click()}},handleSearchInputChange:function(e){""===e?this.$emit("getTableDataByType"):this.$emit("getSearchFileList",e)},handleSearchClick:function(){this.$emit("getSearchFileList",this.searchFile.fileName)},handleBatchOperationChange:function(){this.$emit("update:batchOperate",!this.batchOperate)},handleFileDisplayModelChange:function(e){this.$store.commit("changeFileModel",e)},formatTooltip:function(e){return"".concat(e,"px")}}},r=c,d=(i("4796"),i("2877")),u=Object(d["a"])(r,l,n,!1,null,"6fc90908",null);t["default"]=u.exports},ec30:function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"select-column"},[i("div",{staticClass:"text",on:{click:e.handleSetShowColumnBtnClick}},[i("i",{staticClass:"el-icon-s-operation"}),e._v(" 设置显示字段 ")]),i("el-dialog",{attrs:{title:"设置表格列显隐",width:"700px","append-to-body":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-checkbox-group",{model:{value:e.selectedColumn,callback:function(t){e.selectedColumn=t},expression:"selectedColumn"}},e._l(e.columnOptions,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogOk()}}},[e._v("确 定")])],1)],1)],1)},n=[],a={name:"SelectColumn",data:function(){return{dialogVisible:!1,selectedColumn:[],columnOptions:[{value:"extendName",label:"类型"},{value:"fileSize",label:"大小"},{value:"uploadTime",label:"修改日期"},{value:"deleteTime",label:"删除日期"}]}},methods:{handleSetShowColumnBtnClick:function(){this.selectedColumn=this.$store.getters.selectedColumnList,this.dialogVisible=!0},dialogOk:function(){this.$store.commit("changeSelectedColumnList",this.selectedColumn),this.dialogVisible=!1}}},o=a,s=(i("9204"),i("2877")),c=Object(s["a"])(o,l,n,!1,null,"49c038f8",null);t["default"]=c.exports}}]);