(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c1bb4"],{"46fb":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.limiterList}},[n("el-table-column",{attrs:{align:"center",label:"限流编号",prop:"id"}}),n("el-table-column",{attrs:{align:"center",label:"系统模块",prop:"name"}}),n("el-table-column",{attrs:{align:"center",label:"限流时间(秒)",prop:"time"}}),n("el-table-column",{attrs:{align:"center",label:"限流次数",prop:"count"}}),n("el-table-column",{attrs:{align:"center",label:"方法名",prop:"method"}}),n("el-table-column",{attrs:{align:"center","class-name":"small-padding fixed-width",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{icon:"el-icon-edit",size:"mini",type:"text"},on:{click:function(n){return t.handleUpdate(e.row)}}},[t._v("修改 ")]),n("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"text"},on:{click:function(n){return t.handleDelete(e.row)}}},[t._v("删除 ")])]}}])})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{limit:t.queryParams.pageSize,page:t.queryParams.pageNum,total:t.total},on:{"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},pagination:t.getList}}),n("el-dialog",{attrs:{title:t.title,visible:t.open,"append-to-body":"",width:"500px"},on:{"update:visible":function(e){t.open=e}}},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"系统模块",prop:"id"}},[n("el-input",{attrs:{disabled:"",placeholder:"请输入限流时间"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"限流时间(秒)",prop:"time"}},[n("el-input",{attrs:{placeholder:"请输入限流时间"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),n("el-form-item",{attrs:{label:"限流次数",prop:"count"}},[n("el-input",{attrs:{placeholder:"请输入限流次数"},model:{value:t.form.count,callback:function(e){t.$set(t.form,"count",e)},expression:"form.count"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("确 定")]),n("el-button",{on:{click:t.cancel}},[t._v("取 消")])],1)],1)],1)},l=[],a=(n("d81d"),n("b775"));function o(t){return Object(a["a"])({url:"/system/limiter/list",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/system/limiter/"+t,method:"get"})}function s(t){return Object(a["a"])({url:"/system/limiter",method:"put",data:t})}var u={name:"Limiter",data:function(){return{loading:!0,ids:[],single:!0,multiple:!0,showSearch:!0,total:0,limiterList:[],title:"",open:!1,queryParams:{pageNum:1,pageSize:10,time:null,count:null,method:null},form:{},rules:{}}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.loading=!0,o(this.queryParams).then((function(e){t.limiterList=e.rows,t.total=e.total,t.loading=!1}))},cancel:function(){this.open=!1,this.reset()},reset:function(){this.form={id:null,time:null,count:null,method:null},this.resetForm("form")},handleQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.resetForm("queryForm"),this.handleQuery()},handleSelectionChange:function(t){this.ids=t.map((function(t){return t.id})),this.single=1!==t.length,this.multiple=!t.length},handleUpdate:function(t){var e=this;this.reset();var n=t.id||this.ids;r(n).then((function(t){console.log(t,"response"),e.form=t.data,e.open=!0,e.title="修改限流注解配置"}))},submitForm:function(){var t=this;this.$refs["form"].validate((function(e){if(e){var n=t.form,i=n.id,l=n.time,a=n.count,o=n.method;if(null!=t.form.id){var r={id:i,time:l,count:a,method:o};s(r).then((function(e){t.$modal.msgSuccess("修改成功"),t.open=!1,t.getList()}))}}}))}}},m=u,c=n("2877"),d=Object(c["a"])(m,i,l,!1,null,null,null);e["default"]=d.exports}}]);